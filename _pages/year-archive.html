---
layout: archive
permalink: /year-archive/
title: "Writing"
author_profile: true
redirect_from:
  - /wordpress/blog-posts/
---

{% include base_path %}

{% comment %} Collect all unique tags {% endcomment %}
{% assign tag_list = "" %}
{% for post in site.posts %}
  {% for tag in post.tags %}
    {% if tag and tag != "" %}
      {% assign tag_list = tag_list | append: tag | append: "|||" %}
    {% endif %}
  {% endfor %}
{% endfor %}
{% assign all_tags = tag_list | split: "|||" | uniq | sort %}

{% if all_tags.size > 0 %}
<div class="blog-filters">
  <button class="blog-filter active" data-filter="all">all</button>
  {% for tag in all_tags %}
    <button class="blog-filter" data-filter="{{ tag | slugify }}">{{ tag }}</button>
  {% endfor %}
</div>
{% endif %}

<div class="blog-list">
  {% capture written_year %}'None'{% endcapture %}
  {% for post in site.posts %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% if year != written_year %}
      <div class="blog-year" data-year="{{ year }}">{{ year }}</div>
      {% capture written_year %}{{ year }}{% endcapture %}
    {% endif %}
    {% include blog-card.html %}
  {% endfor %}
</div>

<footer class="blog-acknowledgements">
  Blog template inspired by <a href="https://www.benkuhn.net/" target="_blank">Ben Kuhn</a>.
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const filters = document.querySelectorAll('.blog-filter');
  const items = document.querySelectorAll('.blog-item');
  const years = document.querySelectorAll('.blog-year');

  filters.forEach(filter => {
    filter.addEventListener('click', function() {
      const selected = this.dataset.filter;

      filters.forEach(f => f.classList.remove('active'));
      this.classList.add('active');

      items.forEach(item => {
        if (selected === 'all') {
          item.style.display = 'flex';
        } else {
          const tags = item.dataset.tags ? item.dataset.tags.split(',') : [];
          item.style.display = tags.includes(selected) ? 'flex' : 'none';
        }
      });

      years.forEach(year => {
        let hasVisible = false;
        let sibling = year.nextElementSibling;
        while (sibling && !sibling.classList.contains('blog-year')) {
          if (sibling.classList.contains('blog-item') && sibling.style.display !== 'none') {
            hasVisible = true;
            break;
          }
          sibling = sibling.nextElementSibling;
        }
        year.style.display = hasVisible ? 'block' : 'none';
      });
    });
  });
});
</script>
